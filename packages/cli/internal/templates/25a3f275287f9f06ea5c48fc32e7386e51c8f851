(()=>{"use strict";var e,t,s=[,,,,,,,,,,,,(e,t,s)=>{function r(e,t="Assertion failed."){if(!e)throw new Error(t)}function n(e,t){if(!o(e))throw new Error(t);return e}function o(e){return null!=e}function i(e,t){return t}s.d(t,{hu:()=>r,fp:()=>n,Uh:()=>o,z9:()=>i})},(e,t,s)=>{s.d(t,{Wx:()=>n,WU:()=>o,RQ:()=>i});const r=/(^\/)?([^\/]*)(\/$)?/;function n(e){return e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))}function o(e,t){return e.replace(/\$\{([^}]*)\}/g,((e,s)=>`${t[s]}`))}function i(...e){return e.filter((e=>!!e)).map((e=>e.replace(r,"$2"))).join("/")}},(e,t,s)=>{s.d(t,{f:()=>c,p:()=>a});var r=s(15);class n extends Error{constructor(e="Task was canceled"){super(e)}}class o extends Error{constructor(e){super("One or more errors occurred."),this.errors=e}}class i{constructor(){this._length=0,this.node=null,this.lastNode=null}get length(){return this._length}enqueue(e){const t={value:e};this.node?this.lastNode.next=t:this.node=t,this.lastNode=t,this._length++}dequeue(){const e=this.node?.value;return this.node=this.node?.next??null,this._length--,0==this._length&&(this.lastNode=null),e??null}}const a=new class{constructor(e){this.errors=[],this.highPriorityQueue=new i,this.lowPriorityQueue=new i,this.normalPriorityQueue=new i,this.currentExecution=Promise.resolve(),this.running=!1,this.timeout=e}async nextFrame(){return new Promise((e=>window.requestAnimationFrame(e)))}async processQueue(e,t){let s=0;for(;e.length>0;){const[n,o,i,a]=e.dequeue(),c=window.performance.now();if(a?.canceled)o(void 0);else try{o(n())}catch(e){const t=(0,r.pk)(e);this.errors.push(t),i(t)}s+=window.performance.now()-c,s>this.timeout&&(s=0,await this.nextFrame()),t?.()&&await this.execute()}}async execute(){await this.processQueue(this.highPriorityQueue),await this.processQueue(this.normalPriorityQueue,(()=>this.highPriorityQueue.length>0)),await this.processQueue(this.lowPriorityQueue,(()=>this.highPriorityQueue.length>0||this.normalPriorityQueue.length>0))}start(){this.errors.length=0,this.running=!0,this.currentExecution=async function(e,t,s){return new Promise(((r,o)=>{setTimeout((()=>{if(s?.canceled)o(new n);else try{const t=e();t instanceof Promise?t.then(r,o):r(t)}catch(e){o(e)}}),t)}))}((async()=>(await this.execute(),this.stop())))}stop(){if(this.running=!1,this.errors.length>0)throw new o([...this.errors])}async enqueue(e,t,s){switch(this.running||this.start(),t){case"high":return new Promise(((t,r)=>this.highPriorityQueue.enqueue([e,t,r,s])));case"low":return new Promise(((t,r)=>this.lowPriorityQueue.enqueue([e,t,r,s])));default:return new Promise(((t,r)=>this.normalPriorityQueue.enqueue([e,t,r,s])))}}async execution(){return this.currentExecution}}(16.17);async function c(){return a.execution()}},(e,t,s)=>{s.d(t,{$y:()=>o,w7:()=>i,NA:()=>a,wy:()=>c,tL:()=>h,pk:()=>l,sO:()=>u});const r=Symbol("core:privates");var n;function o(...e){const t=1==e.length?e[0]:i(e[0],e[1]);return t?.get?!t.set:!t?.writable}function i(e,t){let s=e;do{const e=Object.getOwnPropertyDescriptor(s,t);if(e)return e}while(s=Reflect.getPrototypeOf(s));return null}function a(e,...t){const[s,...r]=t;if(r.length>0){if(s in e)return a(e[s],...r);const t=e instanceof Function?e.name:e.constructor.name;throw new Error(`Property "${s}" does not exists on type ${t}`)}return e[s]}function c(e){return e[r]||Object.defineProperty(e,r,{configurable:!0,enumerable:!1,value:{},writable:!1}),e[r]}function h(...e){const t={get(t,s){const r=e.find((e=>s in e));if(r)return r[s]},getOwnPropertyDescriptor(t,s){for(const t of e){const e=Reflect.getOwnPropertyDescriptor(t,s);if(e)return e.configurable=!0,e.enumerable=!0,e}},has:(t,s)=>e.some((e=>s in e)),ownKeys:()=>Array.from(new Set(e.map((e=>Object.getOwnPropertyNames(e))).flatMap((e=>e)))),set(t,s,r){const n=e.find((e=>s in e));return n?n[s]=r:e[0][s]=r,!0}};return new Proxy(e[0],t)}function l(e){return e instanceof Error?e:new Error(String(e))}function u(e,t,...s){const r=s[s.length-1];if(s.length-1>0){a(t,...s.slice(0,s.length-1))[r]=e}else t[r]=e}!function(e){e[e.IgnoreUndefined=1]="IgnoreUndefined",e[e.ConcatArrays=2]="ConcatArrays",e[e.MergeArrays=4]="MergeArrays"}(n||(n={}))},(e,t,s)=>{s.d(t,{gn:()=>r,w6:()=>n});function r(e,t,s,r){var n,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(o<3?n(i):o>3?n(t,s,i):n(t,s))||i);return o>3&&i&&Object.defineProperty(t,s,i),i}function n(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}Object.create;Object.create},(e,t,s)=>{s.d(t,{Z:()=>o});var r=s(18);const n=Symbol("reactive:metadata");class o{constructor(){this.computed=new Map,this.disposables=[],this.isReactiveArray=!1,this.observers=new Map,this.subjects=new Map}static from(e){if(!Reflect.has(e,n)){const t=new o;Reflect.defineProperty(e,n,{configurable:!1,enumerable:!1,value:t}),r.Z.from(e).add(t)}return Reflect.get(e,n)}dispose(){this.disposables.splice(0).forEach((e=>e.dispose())),this.observers.clear(),this.subjects.clear()}}},(e,t,s)=>{s.d(t,{Z:()=>n});const r=Symbol("core:disposable-metadata");class n{constructor(){this.disposables=new Set,this.disposed=!1,this.hooked=!1}static from(e){return Reflect.has(e,r)||Reflect.defineProperty(e,r,{configurable:!1,enumerable:!1,value:new n}),Reflect.get(e,r)}dispose(){this.disposed||(this.disposed=!0,this.disposables.forEach((e=>e.dispose())),this.disposables.clear())}add(e){this.disposables.add(e)}remove(e){this.disposables.delete(e)}}},(e,t,s)=>{s.d(t,{Z:()=>n});const r=Symbol("core:hookable-metadata");class n{constructor(){this.finishers=[],this.initializers=[],this.hooked=!1}static from(e){return Reflect.has(e,r)?e.hasOwnProperty(r)||Reflect.defineProperty(e,r,{configurable:!1,enumerable:!1,value:Reflect.get(e,r).clone()}):Reflect.defineProperty(e,r,{configurable:!1,enumerable:!1,value:new n}),Reflect.get(e,r)}clone(){const e=new n;return e.finishers.push(...this.finishers),e.initializers.push(...this.initializers),e}finish(e){this.finishers.forEach((t=>t(e)))}initialize(e){this.initializers.forEach((t=>t(e)))}}},(e,t,s)=>{s.d(t,{ZP:()=>r});const r=s(21).Z},(e,t,s)=>{s.d(t,{Z:()=>l});var r,n=s(19),o=s(18),i=s(23),a=s(22),c=s(24);const h=Symbol("htmlx-element:instance");class l extends HTMLElement{constructor(){super(),l.applyMetadata(this)}static applyMetadata(e){const t=a.Z.from(e.constructor);e.attachShadow(t.shadowRootInit),e.shadowRoot.adoptedStyleSheets=t.styles;const s=n.Z.from(e.constructor);if(t.template){const{content:s,activator:r}=t.template.create();e.shadowRoot.appendChild(s),i.Z.from(e).activator=r}s.initialize(e)}static[(r=h,Symbol.hasInstance)](e){return Reflect.get(e.constructor,h)}static as(e){var t;return(t=class extends e{constructor(...e){super(...e),l.applyMetadata(this)}dispose(){o.Z.from(this).dispose()}})[h]=!0,t}static registerDirective(e,t){c.a.set(e,t)}dispose(){o.Z.from(this).dispose()}}l[r]=!0},(e,t,s)=>{s.d(t,{Z:()=>n});const r=Symbol("htmlx:static-metadata");class n{constructor(){this.converters={},this.shadowRootInit={mode:"open"},this.observedAttributes=[],this.styles=[]}static from(e){return Reflect.has(e,r)?e.hasOwnProperty(r)||Reflect.defineProperty(e,r,{configurable:!1,enumerable:!1,value:Reflect.get(e,r).inherit()}):Reflect.defineProperty(e,r,{configurable:!1,enumerable:!1,value:new n}),Reflect.get(e,r)}inherit(){const e=new n;return e.converters={...this.converters},e.observedAttributes=[...this.observedAttributes],e.styles=[...this.styles],e}}},(e,t,s)=>{s.d(t,{Z:()=>n});const r=Symbol("htmlx:metadata");class n{constructor(){this.isPropagatingCallback=!1,this.reflectingAttribute=new Set}static from(e){return Reflect.has(e,r)||Reflect.defineProperty(e,r,{configurable:!1,enumerable:!1,value:new n}),Reflect.get(e,r)}}},(e,t,s)=>{s.d(t,{a:()=>r});const r=new Map},(e,t,s)=>{s.d(t,{bT:()=>g,p9:()=>y,w9:()=>b,$o:()=>w,L2:()=>v,Ve:()=>P,he:()=>S,dJ:()=>E,Yo:()=>$,tx:()=>j});var r=s(15),n=s(27);class o extends n.Z{}class i extends n.Z{}var a=s(26),c=s(28),h=s(12),l=s(17);const u=["pop","push","reverse","shift","sort","splice","unshift"];class f{constructor(e,t){this.listeners=new Set,this.root=e,this.path=t}static makeComputed(e,t,s){l.Z.from(e).computed.set(t,s)}static observePath(e,t,s){if(e instanceof Object){const[r,...n]=t,o=l.Z.from(e);this.observeComputed(e,r,o,s);let i=o.subjects.get(r);i||(Array.isArray(e)&&!o.isReactiveArray&&this.observeArray(e),this.observeProperty(e,r),o.subjects.set(r,i=new Map)),i.set(s,n);const a=e[r];n.length>0&&(0,h.Uh)(a)&&this.observePath(a,n,s)}}static observeArray(e){for(const t of u){const s=e[t];function r(...e){const t=l.Z.from(this),r=this.length,n=s.apply(this,e);return this.length!=r&&t.subjects.get("length")?.forEach(((e,t)=>t.notify())),n}Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})}l.Z.from(e).isReactiveArray=!0}static observeComputed(e,t,s,r){const n=s.computed.get(t);if(n)for(const t of n)this.observePath(e,t,r)}static observeProperty(e,t){const s=(0,r.w7)(e,t);if(!s)throw new Error(`Property "${t}" does not exists on type ${e.constructor.name}`);if(s.configurable&&!(0,r.$y)(s)||s.value instanceof Function){const n=(e,s,r)=>{const n=l.Z.from(e).subjects.get(t);for(const[e,t]of n)t.length>0&&((0,h.Uh)(r)&&this.unobservePath(r,t,e),(0,h.Uh)(s)&&this.observePath(s,t,e)),e.notify()};if(s?.set)Reflect.defineProperty(e,t,{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set(e){const t=s.get?.call(this);s.set.call(this,e),Object.is(e,t)||n(this,e,t)}});else{const s=(0,r.wy)(e);s[t]=e[t],Reflect.defineProperty(e,t,{configurable:!0,enumerable:!0,get:()=>s[t],set(e){const r=s[t];s[t]=e,Object.is(e,r)||n(this,e,r)}})}}}static unobservePath(e,t,s){if(e instanceof Object){const[r,...n]=t;l.Z.from(e).subjects.get(r)?.delete(s);const o=e[r];n.length>0&&(0,h.Uh)(o)&&this.unobservePath(o,n,s)}}static compute(e,t,s){return this.makeComputed(e,t,s),this.observe(e,[t])}static observe(e,t){const s=t.join("󿿿"),r=l.Z.from(e);let n=r.observers.get(s);return n||(this.observePath(e,t,n=new f(e,t)),r.observers.set(s,n),r.disposables.push({dispose:()=>this.unobservePath(e,t,n)})),n}static notify(e,t){const s=l.Z.from(e);t?s.observers.get(t.join("󿿿"))?.notify():s.observers.forEach((e=>e.notify()))}subscribe(e){return this.listeners.add(e),{unsubscribe:()=>this.unsubscribe(e)}}unsubscribe(e){if(!this.listeners.delete(e))throw new Error("Listerner not subscribed")}notify(){if(this.listeners.size>0){const e=(0,r.NA)(this.root,...this.path);for(const t of this.listeners)t(e)}}}const p=f;class d extends p{constructor(e,t,s){super(e,t),this.cancellationTokenSource=new c.Z,this.scheduler=s}static observePath(e,t,s){if(e instanceof HTMLElement&&("true"==e.contentEditable||"INPUT"==e.nodeName)){const[r,...n]=t,o=l.Z.from(e);this.observeComputed(e,r,o,s);let i=o.subjects.get(r);if(!i){const t=t=>{t.stopImmediatePropagation();for(const[t]of l.Z.from(e).subjects.get(r))t.notify()};e.addEventListener("input",t),this.observeProperty(e,r),o.subjects.set(r,i=new Map)}i.set(s,n);const a=e[r];n.length>0&&(0,h.Uh)(a)&&this.observePath(a,n,s)}else super.observePath(e,t,s)}static observe(e,t,s){if(s){const r=t.join("󿿿"),n=l.Z.from(e);let o=n.observers.get(r);return o||(this.observePath(e,t,o=new d(e,t,s)),n.observers.set(r,o),n.disposables.push({dispose:()=>this.unobservePath(e,t,o)})),o}return super.observe(e,t)}notify(){this.cancellationTokenSource.cancel(),this.cancellationTokenSource=new c.Z,this.scheduler.enqueue((()=>super.notify()),"high",this.cancellationTokenSource.token)}}var m=s(14);function g(e){return e.map(((e,t)=>e.map((e=>"   ".repeat(t)+e)).join("\n"))).join("\n")}function y(e,t,s,n){b((0,r.NA)(e,...t.slice(0,t.length-1)),t[t.length-1],s,n)}function b(e,t,s,n){const o=(0,r.w7)(e,t);if(!o||(0,r.$y)(o)){const r=o?`Binding error in '${s}': Property "${t}" of ${e.constructor.name} is readonly`:`Binding error in '${s}': Property "${t}" does not exists on type ${e.constructor.name}`;throw new a.Z(r,g(n??[]))}}function w(e){return Object.entries(e).filter((e=>e[1])).map((e=>e[0])).join(" ")}function*v(e,t){let s=null;for(;(s=e.nextSibling)&&s!=t;)yield s}function x(e,t,s,n=!1){const o=[];for(const i of t){const t=d.observe(e,i,m.p);o.push(t.subscribe(s)),n||s((0,r.NA)(e,...i))}return{unsubscribe:()=>o.splice(0).forEach((e=>e.unsubscribe()))}}function P(e){return Object.entries(e).map((([e,t])=>`${e}: ${t}`)).join("; ")}function k(e,t){throw new o(e,g(t))}function R(e,t){throw new i(e,g(t))}function S(e,t,s,n,o="",i=[]){try{return function(e,t,s,n){const o=x(e,[t],(e=>(0,r.sO)(e,s,...n)),!0),i=x(s,[n],(s=>(0,r.sO)(s,e,...t)));return{unsubscribe:()=>(o.unsubscribe(),i.unsubscribe())}}(e,t,s,n)}catch(e){throw o&&i&&R(`Binding error in '${o}': ${(0,r.pk)(e).message}`,i),e}}function E(e,t,s,n){try{return t(e)}catch(e){throw s&&n&&k(`Evaluation error in '${s}': ${(0,r.pk)(e).message}`,n),e}}function $(e,t,s,n,o){try{return t(e,s)}catch(e){throw n&&o&&k(`Evaluation error in '${n}': ${(0,r.pk)(e).message}`,o),e}}function j(e,t,s,n=!1,o="",i=[]){try{return x(e,t,s,n)}catch(e){throw o&&i&&R(`Binding error in '${o}': ${(0,r.pk)(e).message}`,i),e}}},(e,t,s)=>{s.d(t,{Z:()=>n});var r=s(27);class n extends r.Z{}},(e,t,s)=>{s.d(t,{Z:()=>r});class r extends Error{constructor(e,t){super(e),this.stack=`${e}\n${t}`}}},(e,t,s)=>{s.d(t,{Z:()=>r});class r{constructor(){this.canceled=!1;const e=this;this.token={get canceled(){return e.canceled}}}cancel(){this.canceled=!0}}}],r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={id:e,exports:{}};return s[e](o,o.exports,n),o.exports}n.m=s,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,s)=>(n.f[s](e,t),t)),[])),n.u=e=>"js/"+e+"/"+n.h()+".js",n.h=()=>"8b03df4b7630328bc087",n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="app:",n.l=(s,r,o,i)=>{if(e[s])e[s].push(r);else{var a,c;if(void 0!==o)for(var h=document.getElementsByTagName("script"),l=0;l<h.length;l++){var u=h[l];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+o){a=u;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=s),e[s]=[r];var f=(t,r)=>{a.onerror=a.onload=null,clearTimeout(p);var n=e[s];if(delete e[s],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(r))),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),c&&document.head.appendChild(a)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={1:0};n.f.j=(t,s)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var o=new Promise(((s,n)=>r=e[t]=[s,n]));s.push(r[2]=o);var i=n.p+n.u(t),a=new Error;n.l(i,(s=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,r[1](a)}}),"chunk-"+t,t)}};var t=(t,s)=>{var r,o,[i,a,c]=s,h=0;if(i.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(c)c(n)}for(t&&t(s);h<i.length;h++)o=i[h],n.o(e,o)&&e[o]&&e[o][0](),e[i[h]]=0},s=self.webpackChunkapp=self.webpackChunkapp||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),(()=>{var e=n(20),t=n(16);class s{constructor(){this.listeners=new Set}subscribe(e){return this.listeners.add(e),{unsubscribe:()=>this.unsubscribe(e)}}unsubscribe(e){if(!this.listeners.delete(e))throw new Error("Listerner not subscribed")}notify(e){for(const t of this.listeners)t(e)}}class r{constructor(e){this.factory=e}get value(){return this.cache||(this.cache=this.factory()),this.cache}reset(){this.cache=void 0}}var o=n(12),i=n(13);const a=Symbol("dependency-injection:static-metadata");class c{constructor(){this.parameters=[],this.properties=[]}static from(e){return Reflect.has(e,a)?e.hasOwnProperty(a)||Reflect.defineProperty(e,a,{configurable:!1,enumerable:!1,value:Reflect.get(e,a).inherit()}):Reflect.defineProperty(e,a,{configurable:!1,enumerable:!1,value:new c}),Reflect.get(e,a)}inherit(){const e=new c;return e.properties.push(...this.properties),e}}class h{constructor(e=null){this.parent=e,this.cache=new Map,this.scopeCache=new Map,this.registries=new Map,this.scoped=new Set,this.singletons=new Set,this.stack=new Set}clearScope(){this.scopeCache.clear(),this.parent?.clearScope()}*enumerateScopedCache(){if(this.parent)for(const e of this.parent.enumerateScopedCache())yield e;for(const e of this.scopeCache)yield e}getCacheEntry(e,t){return t?this.scopeCache.get(e)??this.parent?.getCacheEntry(e,t):this.cache.get(e)??this.parent?.getCacheEntry(e,t)}getRoot(){return this.parent?.getRoot()??this}internalInject(e){const t="function"==typeof e?e:e.constructor,s=c.from(t),r=s.provider??this,n=s.provider?.getRoot();n&&(n.parent=this);const o="function"==typeof e?Reflect.construct(e,s.parameters.map((e=>r.internalResolve(e)))):e;for(const[e,t]of s.properties)o[e]=r.internalResolve(t);return n&&(n.parent=null),o}internalResolve(e){const t=this.scoped.has(e),s=this.singletons.has(e);let r=null;const n=t||s?this.getCacheEntry(e,t):null;if(n)r=n;else{const n=this.registries.get(e);if(n){if(this.stack.has(e))throw new Error(`Circularity dependency to the key: ${"function"==typeof e?`[function ${e.name}]`:e.toString()}`);this.stack.add(e),r=this.internalInject(n.prototype?n:n(this)),this.stack.delete(e),t&&this.scopeCache.set(e,r),s&&this.cache.set(e,r)}else this.parent&&(r=this.parent.internalResolve(e))}if(!r)throw new Error(`Cannot resolve entry for the key ${"function"==typeof e?e.name:e.toString()}`);return r}dispose(){for(const e of this.cache.values())e.dispose?.();this.registries.clear(),this.cache.clear(),this.scoped.clear(),this.singletons.clear()}createScope(){return new l(this)}inject(e){const t=this.internalInject(e);return this.clearScope(),t}registerScoped(...e){const[t,s]=1==e.length?[e[0],e[0]]:e;return this.registries.set(t,s),this.scoped.add(t),this}registerSingleton(...e){const[t,s,r]=1==e.length?[e[0],e[0],null]:(0,o.z9)(e,"function"==typeof e[1])?[...e,null]:[e[0],null,e[1]];return r&&this.cache.set(t,r),s&&this.registries.set(t,s),this.singletons.add(t),this}registerTransient(...e){const[t,s]=1==e.length?[e[0],e[0]]:e;return this.registries.set(t,s),this}resolve(e){return this.internalResolve(e)}}class l extends h{factorize(e){const t=e();for(const[e,t]of this.enumerateScopedCache())this.cache.set(e,t);return this.clearScope(),t}inject(e){return this.factorize((()=>super.internalInject(e)))}resolve(e){const t=this.cache.get(e);return t||this.factorize((()=>super.internalResolve(e)))}}const u=h;var f,p=n(14),d=n(19),m=n(17);!function(e){e[e.Eof=0]="Eof",e[e.Literal=1]="Literal",e[e.Punctuator=2]="Punctuator",e[e.Space=3]="Space"}(f||(f={}));const g=f;var y;!function(e){e[e.Assignment=0]="Assignment",e[e.Identifier=1]="Identifier",e[e.Literal=2]="Literal",e[e.Wildcard=3]="Wildcard",e[e.Rest=4]="Rest",e[e.Segment=5]="Segment",e[e.Transformer=6]="Transformer"}(y||(y={}));const b=y;class w{constructor(e,t){this.left=e,this.right=t,this.type=b.Assignment}toString(){return b[b.Assignment]}}class v{constructor(e,t=!1){this.name=e,this.optional=t,this.type=b.Identifier}toString(){return b[b.Identifier]}}class x{constructor(e){this.value=e,this.type=b.Literal}toString(){return b[b.Literal]}}class P{constructor(e){this.name=e,this.type=b.Rest}toString(){return b[b.Rest]}}class k{constructor(e,t){this.nodes=e,this.optional=t,this.type=b.Segment}toString(){return`[${this.nodes.map((e=>e.toString())).join(", ")}]`}}class R{static isAssignment(e){return e.type==b.Assignment}static isIdentifier(e){return e.type==b.Identifier}static isLiteral(e){return e.type==b.Literal}static isRest(e){return e.type==b.Rest}static isTransformer(e){return e.type==b.Transformer}static isWildcard(e){return e.type==b.Wildcard}}class S{constructor(e,t){this.name=e,this.transformer=t,this.type=b.Transformer,this.optional=R.isAssignment(t)||t.optional}toString(){return b[b.Transformer]}}class E{constructor(){this.type=b.Wildcard}toString(){return b[b.Wildcard]}}class ${constructor(e){this.index=0,this.source=e}get current(){return this.source[this.index]}get eof(){return this.index==this.source.length}advance(){this.index++}isPunctuator(e){switch(e){case"{":case"}":case"=":case":":case"*":case"?":case"/":return!0;default:return!1}}isSpace(e){return" "==e}scanPunctuator(){const e=this.index,t=this.current;return this.advance(),{index:e,type:g.Punctuator,value:t}}scanSpace(){return{index:this.index,type:g.Space,value:this.current}}scanLiteral(){const e=this.index;for(;!this.eof&&!this.isPunctuator(this.current)&&!this.isSpace(this.current);)this.advance();return{index:e,type:g.Literal,value:this.source.substring(e,this.index)}}nextToken(){return this.eof?{index:this.index,type:g.Eof,value:""}:this.isSpace(this.current)?this.scanSpace():this.isPunctuator(this.current)?this.scanPunctuator():this.scanLiteral()}}class j{constructor(e){this.scanner=new $(e),this.lookahead=this.scanner.nextToken()}static parse(e){return new j(e).parse()}expect(e){const t=this.nextToken();t.value!=e&&this.throwUnexpectedToken(t)}assertKeysIdentity(e){const t=new Set;for(const s of e.flatMap((e=>e.nodes))){const e=R.isAssignment(s)?s.left:R.isIdentifier(s)||R.isRest(s)||R.isTransformer(s)?s.name:void 0;if(e&&t.has(e))throw new Error(`Found duplicated key ${e}`);t.add(e)}}hasOptional(e){const t=1==e.length?e[0]:null;return!!t&&(R.isAssignment(t)||R.isRest(t)||R.isIdentifier(t)&&t.optional||R.isTransformer(t)&&t.optional)}nextToken(){const e=this.lookahead;return this.lookahead=this.scanner.nextToken(),e}match(e){return this.lookahead.type===g.Punctuator&&this.lookahead.value===e}parse(){if(this.lookahead.type==g.Eof)throw new Error("Unexpected end of path");const e=[];for(;this.lookahead.type!=g.Eof;)e.push(this.parseSegment());return this.assertKeysIdentity(e),e}parseIdentifierNode(e=!1){const t=this.nextToken();if(t.type==g.Literal)return this.match("=")?(this.expect("="),new w(t.value,this.nextToken().value)):!e&&this.match(":")?(this.expect(":"),new S(t.value,this.parseIdentifierNode(!0))):this.match("?")?(this.expect("?"),new v(t.value,!0)):new v(t.value);this.throwUnexpectedToken(t)}parseSegment(){this.expect("/");const e=[];for(;!this.match("/")&&this.lookahead.type!=g.Eof;)switch(this.lookahead.type){case g.Literal:e.push(new x(this.lookahead.value)),this.nextToken();break;case g.Punctuator:if(this.match("*"))this.expect("*"),e.push(new E);else if(this.match("{")){if(this.expect("{"),this.match("*")){this.expect("*");const t=this.nextToken();t.type!=g.Literal&&this.throwUnexpectedToken(t),e.push(new P(t.value))}else e.push(this.parseIdentifierNode());this.expect("}"),this.match("{")&&this.throwUnexpectedToken(this.lookahead)}else this.throwUnexpectedToken(this.lookahead);break;case g.Space:default:throw new Error(`Unexpected space at ${this.lookahead.index}`)}return new k(e,this.hasOptional(e))}throwUnexpectedToken(e){throw new Error(`Unexpected token ${e.value} at ${e.index}`)}}class A{constructor(e,t,s){this.constraints=t,this.transformers=s,this.segments=j.parse(this.normalize(e)),this.nodes=this.segments.flatMap((e=>e.nodes)),this.pattern=new RegExp(`^${Array.from(this.segmentMap(this.segments)).join("")}$`)}*segmentMap(e){for(const t of e){const e=Array.from(this.nodeMap(t.nodes)).join("");yield t.optional?`(?:/${e})?`:`/${e}`}}*nodeMap(e){for(const t of e)(R.isAssignment(t)||R.isWildcard(t))&&(yield"([^\\/]*)"),R.isRest(t)?yield"(.*)":R.isTransformer(t)||R.isIdentifier(t)?yield t.optional?"([^\\/]*)":"([^\\/]+)":R.isLiteral(t)&&(yield`(${t.value})`)}collectParameters(e){const t={};for(let s=0;s<this.nodes.length;s++){const r=this.nodes[s],n=e[s+1];if(!R.isLiteral(r))if(R.isAssignment(r))t[r.left]=n||r.right;else if(R.isTransformer(r)){const[e,s]=R.isAssignment(r.transformer)?[r.transformer.left,n??r.transformer.right]:[r.transformer.name,n],o=this.constraints.get(e),i=this.transformers.get(e);if(!o&&!i)throw new Error(`Unregistred constraint or transformer ${e}`);if(s&&!r.optional&&!(o?.validate(s)??1))return null;s&&(t[r.name]=i?i.parse(s):s)}else R.isIdentifier(r)&&n?t[r.name]=n:R.isRest(r)&&(t[r.name]=n??"")}return t}matchParameters(e){const t=[],s=[],r=[],n={};for(const i of this.segments){t.push("/");const a=t.length;for(const a of i.nodes)if(R.isLiteral(a))t.push(a.value);else if(R.isAssignment(a)){let s;const r=n[a.left]=e[a.left]||(s=a.right);r!=s&&t.push(r)}else if(R.isTransformer(a)){let i;const[c,h]=R.isAssignment(a.transformer)?[a.transformer.left,e[a.name]??(i=a.transformer.right)]:[a.transformer.name,e[a.name]],l=this.constraints.get(c),u=this.transformers.get(c);if(!l&&!u)throw new Error(`Unregistred constraint or transformer ${c}`);if((0,o.Uh)(h)){if(u)if(h==i)n[a.name]=u.parse(h),t.push(h);else{n[a.name]=h;const e=u.stringify(h);this.constraints.get(c)?.validate(e)?t.push(e):r.push(`${"string"==typeof h?`"${h}"`:h} is not assignable to ${a.name}:${c}`)}}else a.optional||s.push(a.name)}else if(R.isIdentifier(a)){const r=e[a.name];(0,o.Uh)(r)?t.push(n[a.name]=e[a.name]):a.optional||s.push(a.name)}else if(R.isRest(a)){const s=n[a.name]=e[a.name]??"";s&&t.push(s)}t.length==a&&i.optional&&t.pop()}const i=[];return r.length>0&&i.push(`Invalid parameters: ${r.join(", ")}`),s.length>0&&i.push(`Missing parameters: ${s.join(", ")}`),i.length>0?{matched:!1,reason:i.join(", ")}:{matched:!0,routeData:{parameters:n,path:t.join("")}}}matchUrl(e){const t=this.normalize(e),s=this.pattern.exec(t);if(s){const e=this.collectParameters(s);if(e)return{matched:!0,routeData:{parameters:e,path:t}}}return{matched:!1,reason:"Pattern don't match"}}normalize(e){return"/"==e?e:(e.startsWith("/")?"":"/")+e.replace(/\/$/,"")}match(e){return"string"==typeof e?this.matchUrl(e):this.matchParameters(e)}}const C=/^[a-zA-Z]+$/,O=/^([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))$/,T=/^(([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})|([0-9a-f]{32}))$/i,M=[["Alpha",{validate:e=>C.test(e)}],["Boolean",{validate:e=>"true"==e||"false"==e}],["Date",{validate:e=>O.test(e)}],["Number",{validate:e=>!Number.isNaN(Number(e))}],["UIID",{validate:e=>T.test(e)}]],Z=[["Boolean",{parse:Boolean,stringify:String}],["Date",{parse:e=>new Date(e),stringify:e=>e.toISOString().replace(/T.+$/,"")}],["Number",{parse:Number,stringify:String}]];const L=class{constructor(){this.entries=[],this.namedEntries=new Map}map(e){const t=new Map([...M,...Object.entries(e.constraints??{})]),s=new Map([...Z,...Object.entries(e.transformers??{})]),r={route:new A(e.pattern,t,s),selector:e.selector??(e=>e)};return e.name&&this.namedEntries.set(e.name,r),this.entries.push(r),this}match(...e){if(1==e.length){const t=e[0];if(t.includes("?")||t.includes("#"))throw new Error(`"${t}" is not a valid url pathname`);for(const e of this.entries){const s=e.route.match(t);if(s.matched)return{matched:!0,value:e.selector(s.routeData)}}return{matched:!1,reason:`No match found to the path: ${t}`}}const[t,s]=e,r=this.namedEntries.get(t);if(r){const e=r.route.match(s);return e.matched?{matched:!0,value:r.selector(e.routeData)}:e}return{matched:!1,reason:`No named route found to: ${t}`}}},U=Symbol("view-router:metadata");class I{constructor(){this.outlets=new Map}static from(e){return e[U]=e[U]??new I}}const N=/(.+)\/.+$/;class z{static resolveComponents(e){return"component"in e?new Map([["default",e.component]]):new Map(Object.entries(e.components))}static*configure(e,t){for(const s of e){let e=!1;const r=!t||s.path.startsWith("/")?s.path:s.path?`${t.path}/${s.path}`:t.path,n=z.resolveComponents(s);if(0==n.size)throw new Error(`Route "${s.path}" requires at least one component`);const o={constraints:{...t?.constraints,...s.constraints},meta:s.meta??{},name:s.name,path:r,selector:s.selector,stack:[...t?.stack??[],n],transformers:{...t?.transformers,...s.transformers}};if((s.children?.length??0)>0)for(const t of z.configure(s.children,o))t.path==o.path&&(e=!0),yield t;e&&(o.path=o.path.replace(N,"$1")),yield o}}}const Q=/^\//;class q{constructor(e){this.connectedElements=[],this.history=[],this.router=new L,this.cache=[],this.index=0,this.routeChangeEvent=new s,this.root=new r((()=>(0,o.fp)(document.querySelector(e.root),`Cannot find root element using selector: ${e.root}`))),this.baseUrl=e.baseUrl??"",this.container=e.container??new u,this.interceptors=(e.interceptors??[]).map((e=>"function"==typeof e?this.container.inject(e):e)),this.scope=this.container.createScope();for(const t of z.configure(e.routes))this.router.map({constraints:t.constraints,name:t.name,pattern:(0,i.RQ)(this.baseUrl,t.path),selector:e=>[t,e],transformers:t.transformers});this.container.registerSingleton(q,this),window.addEventListener("popstate",(()=>{this.pushCurrentLocation()}))}get route(){return this.context?.route??{meta:{},name:"",parameters:{},url:new URL(window.location.href)}}connectToOutlet(e,t,s,r,n,o="router-outlet",i=!1){const a=I.from(e).outlets;let c=a.get(s)??null;if(!c||!c.isConnected){if(!e.shadowRoot)throw new Error("Routeable component requires an open shadowRoot");c=e.shadowRoot.querySelector("default"==s?`${o}:not([name])`:`${o}[name=${s}]`)}if(!c)throw new Error(`Cannot find outlet by provided selector "${o}${"default"==s?"":`[name=${s}]`}"`);{const h=this;c.remove=function(){this.parentNode?.removeChild(this),h.route==r&&(0,p.f)().then((()=>h.connectToOutlet(e,t,s,r,n,o,!0)))}.bind(c),a.set(s,c);const l=c.firstElementChild;l?(l.onRouteLeave?.(r,n),l.dispose?.(),c.replaceChild(t,l)):c.appendChild(t),i||t.onRouteEnter?.(r,n),this.connectedElements.push(t)}}async create(e,t,s,r,n){const o=this.createRoute(e,t,s),i=this.context?.route;if(!await this.invokeMiddleware(o,i)){const a=this.context,c=t==a?.definition,h=this.cache.slice(0,t.stack.length);this.context={definition:t,route:o};let l=this.root.value,u=!0;for(let e=0;e<t.stack.length;e++){const s=t.stack[e],r=new Set(s.keys());if(this.disconnectFromOutlets(l,r,o,i),s==a?.definition?.stack[e]){const t=h[e].default??h[e][r.values().next().value];c?t.onRouteUpdate?.(o,i):t.onRouteEnter?.(o,i),u=!1,l=t}else{let r;u&&(this.scope.dispose(),this.scope=this.container.createScope()),h[e]={};for(const[n,a]of s){const s=await this.resolveComponent(a),c=this.scope.inject(s);this.connectToOutlet(l,c,n,o,i,t.selector),h[e][n]=c,r&&"default"!=n||(r=c)}l=r}}this.cache=h,r||(n?this.history[this.index]=[e,t,s]:(this.history.splice(this.index+1,1/0),this.history.push([e,t,s]),this.index=this.history.length-1)),this.routeChangeEvent.notify({from:i,to:o})}}createRoute(e,t,s){return{meta:t.meta,name:t.name??"",parameters:s.parameters,url:e}}disconnectElements(){this.connectedElements.forEach((e=>(e.dispose?.(),e.remove()))),this.context=void 0}disconnectFromOutlets(e,t,s,r){const n=I.from(e).outlets;for(const e of n.values())if(!t.has(e.getAttribute("name")??"default")){const t=e.firstElementChild;(0,o.z9)(t,!!t)&&(t.onRouteLeave?.(s,r),t.dispose?.(),t.remove())}}resolveModule(e){return"default"in e?e.default:e}async resolveComponent(e){if("function"==typeof e){if((0,o.z9)(e,!e.prototype))return this.resolveComponent(e())}else if(e instanceof Promise)return this.resolveModule(await e);return this.resolveModule(e)}async invokeMiddleware(e,t){let s=!1;const r=async e=>{await this.push(e),s=!0};for(const n of this.interceptors)if(await n.intercept(r,e,t),s)break;return s}resolvePath(e){return new URL(e.replace(Q,""),`${(0,i.RQ)(window.location.origin,this.baseUrl)}/`)}async pushOrReplace(e,t){if("string"==typeof e){const s=this.resolvePath(e),r=this.router.match(s.pathname);r.matched?(await this.create(s,...r.value,!1,t),window.history.pushState(null,"",this.route.url.href)):this.disconnectElements()}else{const s=this.router.match(e.name,e.parameters??{});if(s.matched){const[r,n]=s.value,o=new URL((0,i.RQ)(window.location.origin,n.path));o.hash=e.hash??"";for(const[t,s]of Object.entries(e.query??{}))Array.isArray(s)?s.forEach((e=>o.searchParams.append(t,e))):o.searchParams.set(t,s);await this.create(o,r,n,!1,t),window.history.pushState(null,"",this.route.url.href)}else this.disconnectElements()}}async back(){await this.go(-1)}async forward(){await this.go(1)}async go(e){const t=Math.min(Math.max(this.index+e,0),this.history.length-1);if(t!=this.index){const[e,s,r]=this.history[t];await this.create(e,s,r,!0,!1),window.history.replaceState(null,"",e.href),this.index=t}}async push(e){return this.pushOrReplace(e,!1)}async replace(e){return this.pushOrReplace(e,!0)}async pushCurrentLocation(){await this.push(window.location.href)}}(0,t.gn)([function(...e){const t=e.map((e=>Array.isArray(e)?e:[e]));return(e,s)=>{d.Z.from(e.constructor).finishers.push((e=>{m.Z.from(e).computed.set(s,t)}))}}("current"),(0,t.w6)("design:type",Object),(0,t.w6)("design:paramtypes",[])],q.prototype,"route",null);const D=q;var B=n(25);class W extends class{constructor(e){this.context=e,this.onBeforeBind?.(),this.subscription=(0,B.tx)(this.context.scope,this.context.observables,this.valueNotify.bind(this),!0,this.context.source,this.context.stackTrace),this.valueNotify(),this.onAfterBind?.()}valueNotify(){const e=this.value,t=(0,B.dJ)(this.context.scope,this.context.value,this.context.source,this.context.stackTrace);this.value=t,this.onValueChange?.(t,e)}dispose(){this.onBeforeUnbind?.(),this.subscription.unsubscribe(),this.onAfterUnbind?.()}}{constructor(e,t){super(t),this.router=e,this.disposed=!1,this.onClick=e=>{e.ctrlKey?window.open(this.value):this.router.push(this.value)},t.element instanceof HTMLAnchorElement&&(t.element.href="javascript:void(0)"),t.element.addEventListener("click",this.onClick)}dispose(){this.disposed||(this.context.element.removeEventListener("click",this.onClick),super.dispose(),this.disposed=!0)}}const _=new D({root:"app-root",routes:[{component:async()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(n,1)),name:"hello",path:"/hello"},{component:async()=>Promise.all([n.e(0),n.e(3)]).then(n.bind(n,2)),name:"world",path:"/world"}]});e.ZP.registerDirective("to",(e=>new W(_,e))),Promise.all([n.e(0),n.e(4)]).then(n.bind(n,3))})()})();